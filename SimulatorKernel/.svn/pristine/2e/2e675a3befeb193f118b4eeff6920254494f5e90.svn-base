package br.ufpe.simulatorkernel.domain;

import org.apache.log4j.Logger;

import br.ufpe.simulator.math.MathConstants;
import br.ufpe.simulator.math.MathUtils;
import br.ufpe.simulator.messages.MessageUtils;
import br.ufpe.simulator.utils.ConvertUtils;

public class LineAmplifier extends IsPhysicalElement {

	private static Logger logger = Logger.getLogger(LineAmplifier.class);
	private static final String LINEAMPLIFIER_ASE_INFO = "lineAmplifier.ase.info";

	private double noiseFigure;

	@Override
	public double getLinearNoise(double rs) {
		double ase = 0;
		if (IS_ASE_NOISE_EFFECT_ACTIVED) {
			double g = getG();
			ase = MathConstants.PLANCK * rs
					* IsPhysicalElement.getWDMCentralFrequency()
					* MathUtils.converdBToLinear(noiseFigure) * (g - 1);
			logger.info(MessageUtils.createMessage(LINEAMPLIFIER_ASE_INFO,
					noiseFigure, rs,
					IsPhysicalElement.getWDMCentralFrequency(), MathUtils
							.convertLinearTodB(g), ConvertUtils
							.convertToString(MathUtils.convertLinearTodBm(ase))));
		}
		return ase;
	}

	public double getNoiseFigure() {
		return noiseFigure;
	}

	public void setNoiseFigure(double noiseFigure) {
		this.noiseFigure = noiseFigure;
	}

	@Override
	public boolean isTopologyNode() {
		return false;
	}
}
